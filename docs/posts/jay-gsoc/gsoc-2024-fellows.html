<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jay Sanjay Landge">
<meta name="dcterms.date" content="2024-09-07">
<meta name="description" content="A summary of my project for Google Summer of Code - 2024">

<title>GSoC ’24: Developing Tooling for Observational Health Research in Julia – The JuliaHealth Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../profile.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dbcbc950a42bcaf185fdba3d0ea6113f.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-21ab05999d9ba4f3397b27295ec92d09.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "?"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script data-goatcounter="https://juliahealthblog.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="GSoC ’24: Developing Tooling for Observational Health Research in Julia – The JuliaHealth Blog">
<meta property="og:description" content="A summary of my project for Google Summer of Code - 2024">
<meta property="og:site_name" content="The JuliaHealth Blog">
<meta property="og:locale" content="en_EN">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../profile.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The JuliaHealth Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">Write with Us</span>
    </span>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-join-juliahealth" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Join JuliaHealth</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-join-juliahealth">    
        <li>
    <a class="dropdown-item" href="https://julialang.org/slack/"><i class="bi bi-slack" role="img">
</i> 
 <span class="dropdown-text">Slack (#health-and-medicine)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://julialang.zulipchat.com/"><i class="bi bi-lightning-charge-fill" role="img">
</i> 
 <span class="dropdown-text">Julia Zulip</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://discourse.julialang.org/"><i class="bi bi-pencil-square" role="img">
</i> 
 <span class="dropdown-text">Julia Discourse</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/JuliaHealth/JuliaHealthBlog">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/JuliaHealth/JuliaHealthBlog/issues/new/choose">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<b>Navigation &amp; Tips:</b>

<ul>
    <li>Press <b>?</b> for search</li>
    <li><b>"&lt;/&gt; Code"</b> for code nav</li>
</ul>

</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hi-everyone" id="toc-hi-everyone" class="nav-link active" data-scroll-target="#hi-everyone">Hi Everyone! 👋</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a>
  <ul class="collapse">
  <li><a href="#what-is-observational-health-research" id="toc-what-is-observational-health-research" class="nav-link" data-scroll-target="#what-is-observational-health-research">What Is Observational Health Research?</a></li>
  <li><a href="#what-are-patient-pathways" id="toc-what-are-patient-pathways" class="nav-link" data-scroll-target="#what-are-patient-pathways">What Are Patient Pathways?</a></li>
  </ul></li>
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description">Project Description</a></li>
  <li><a href="#project-goals" id="toc-project-goals" class="nav-link" data-scroll-target="#project-goals">Project Goals</a></li>
  <li><a href="#tasks" id="toc-tasks" class="nav-link" data-scroll-target="#tasks">Tasks</a>
  <ul class="collapse">
  <li><a href="#setting-up-the-package-in-juliahealth-channel" id="toc-setting-up-the-package-in-juliahealth-channel" class="nav-link" data-scroll-target="#setting-up-the-package-in-juliahealth-channel">1. Setting Up the Package in JuliaHealth Channel</a></li>
  <li><a href="#loading-the-postgresql-database" id="toc-loading-the-postgresql-database" class="nav-link" data-scroll-target="#loading-the-postgresql-database">2. Loading the PostgreSQL Database</a></li>
  <li><a href="#testing-and-development-setup-on-my-local-computer" id="toc-testing-and-development-setup-on-my-local-computer" class="nav-link" data-scroll-target="#testing-and-development-setup-on-my-local-computer">3. Testing and Development setup on my local computer</a></li>
  <li><a href="#selecting-treatments-of-interest" id="toc-selecting-treatments-of-interest" class="nav-link" data-scroll-target="#selecting-treatments-of-interest">4. Selecting Treatments of Interest</a></li>
  <li><a href="#filters-applied" id="toc-filters-applied" class="nav-link" data-scroll-target="#filters-applied">5. Filters Applied</a></li>
  <li><a href="#treatment-history-of-the-patients" id="toc-treatment-history-of-the-patients" class="nav-link" data-scroll-target="#treatment-history-of-the-patients">6. Treatment History of the Patients</a></li>
  <li><a href="#combinationwindow-functionality-to-combine-overlapping-treatments" id="toc-combinationwindow-functionality-to-combine-overlapping-treatments" class="nav-link" data-scroll-target="#combinationwindow-functionality-to-combine-overlapping-treatments">7. CombinationWindow Functionality To Combine Overlapping Treatments</a>
  <ul class="collapse">
  <li><a href="#switch-case" id="toc-switch-case" class="nav-link" data-scroll-target="#switch-case">Switch Case:</a></li>
  <li><a href="#frfs-first-row-first-shortened" id="toc-frfs-first-row-first-shortened" class="nav-link" data-scroll-target="#frfs-first-row-first-shortened">FRFS (First Row, First Shortened):</a></li>
  <li><a href="#lrfs-last-row-first-shortened" id="toc-lrfs-last-row-first-shortened" class="nav-link" data-scroll-target="#lrfs-last-row-first-shortened">LRFS (Last Row, First Shortened):</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#contributions-beyond-coding" id="toc-contributions-beyond-coding" class="nav-link" data-scroll-target="#contributions-beyond-coding">Contributions Beyond Coding</a>
  <ul class="collapse">
  <li><a href="#organizing-meetings-and-communication" id="toc-organizing-meetings-and-communication" class="nav-link" data-scroll-target="#organizing-meetings-and-communication">1. Organizing Meetings and Communication</a></li>
  <li><a href="#personal-documentation" id="toc-personal-documentation" class="nav-link" data-scroll-target="#personal-documentation">2. Personal Documentation</a></li>
  <li><a href="#contributions-to-the-rest-of-the-juliahealth-repositories" id="toc-contributions-to-the-rest-of-the-juliahealth-repositories" class="nav-link" data-scroll-target="#contributions-to-the-rest-of-the-juliahealth-repositories">3. Contributions To the Rest of the JuliaHealth Repositories</a></li>
  </ul></li>
  <li><a href="#conclusions-and-future-development" id="toc-conclusions-and-future-development" class="nav-link" data-scroll-target="#conclusions-and-future-development">Conclusions and Future Development</a></li>
  <li><a href="#acknowledgements" id="toc-acknowledgements" class="nav-link" data-scroll-target="#acknowledgements">Acknowledgements 🙇‍♂️</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/JuliaHealth/JuliaHealthBlog/edit/main/posts/jay-gsoc/gsoc-2024-fellows.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/JuliaHealth/JuliaHealthBlog/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">GSoC ’24: Developing Tooling for Observational Health Research in Julia</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">gsoc</div>
    <div class="quarto-category">sql</div>
    <div class="quarto-category">observational health</div>
    <div class="quarto-category">analysis</div>
  </div>
  </div>

<div>
  <div class="description">
    A summary of my project for Google Summer of Code - 2024
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jay Sanjay Landge </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 7, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="hi-everyone" class="level1">
<h1>Hi Everyone! 👋</h1>
<p>I am Jay Sanjay, and I am pursuing a Bachelor’s degree in Computational Sciences and Engineering at the Indian Institute of Technology (IIT) in Hyderabad, India. Coming from a mathematics and data analysis background, I was initially introduced to Julia at my university lectures. Later, I delved more into the language and the JuliaHealth community - an intersection of Julia, Health Research, Data Sciences, and Informatics. Here, I met some of the great folks in JuliaHealth and I decided to take it on as a full-fledged summer project. In this blog, I will briefly describe what my project is and what I did as a part of it.</p>
<ol type="1">
<li><p>You can find my <a href="https://summerofcode.withgoogle.com/archive/2024/projects/ZXVIYAXG"><strong>GSoC project archive link</strong></a></p></li>
<li><p>You can also find the related publication of my work on <a href="https://zenodo.org/records/14674051"><strong>Zenodo</strong></a></p></li>
<li><p>If you want to know more about me, you can connect with me on <a href="https://www.linkedin.com/in/jay-landge-589439260/"><strong>LinkedIn</strong></a> and follow me on <a href="https://github.com/Jay-sanjay"><strong>GitHub</strong></a></p></li>
</ol>
</section>
<section id="background" class="level1">
<h1>Background</h1>
<section id="what-is-observational-health-research" class="level2">
<h2 class="anchored" data-anchor-id="what-is-observational-health-research">What Is Observational Health Research?</h2>
<p>Observational Health Research refers to studies that analyze real-world data (such as patient medical claims, electronic health records, etc.) to understand patient health. These studies often encompass a vast amount of data concerning patient care. An outstanding challenge here is that these datasets can become very complex and grow large enough to require advanced computing methods to process this information.</p>
</section>
<section id="what-are-patient-pathways" class="level2">
<h2 class="anchored" data-anchor-id="what-are-patient-pathways">What Are Patient Pathways?</h2>
<p>Patient pathways refer to the journey that patients with specific medical conditions undergo in terms of their treatment. This concept goes beyond simple drug uptake statistics and looks at the sequence of treatments patients receive over time, including first-line treatments and subsequent therapies. Understanding patient pathways is essential for analyzing treatment patterns, adherence to clinical guidelines, and the disbursement of drugs. To analyze patient pathways, one would typically use real-world data from sources such as electronic health records, claims data, and registries. However, barriers such as data interoperability and resource requirements have hindered the full utilization of real-world data for this purpose.</p>
<p>So to address these challenges we (the JuliaHealth organization and I) want to develop a set of tools to extract and analyze these patient pathways. These sets of tools are based on the Observational Medical Outcomes Partnership (OMOP) Common Data Model, which standardizes healthcare data to promote interoperability.</p>
</section>
</section>
<section id="project-description" class="level1">
<h1>Project Description</h1>
<p>As part of this project with JuliaHealth, I developed a new package called <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl"><strong>OMOPCDMPathways.jl</strong></a>. This package is designed for deployment in research projects, particularly those related to health and medical data analysis. This project takes much inspiration from the paper <a href="https://www.sciencedirect.com/science/article/pii/S016926072200462X?via%3Dihub"><em>TreatmentPatterns: An r package to facilitate the standardized development and analysis of treatment patterns across disease domains</em></a> <span class="citation" data-cites="markus2022treatmentpatterns"><a href="#ref-markus2022treatmentpatterns" role="doc-biblioref">[1]</a></span> and explores the implementation of some of those ideas to develop new tools within the JuliaHealth Observational Health Subecosystem for exploring patient pathways. Additional new features and approaches were added and explored within this project. Additionally, I have authored a developer guide for the package, providing instructions on its use and contribution. This project provided me with hands-on experience in developing production-level code and exposed me to open-source software development practices. I had the opportunity to work in a team, under my mentors, and ensured the integration of the package with the rest of JuliaHealth, facilitating its adoption and usability within the community.</p>
</section>
<section id="project-goals" class="level1">
<h1>Project Goals</h1>
<p>As a part of the development, I was majorly engaged in crafting the following functionalities:</p>
<ol type="1">
<li><p>Selecting treatments of interest: The first decision that was made was to decide the time from which the desired treatments of interest should be included in the treatment pathway study. Here the <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/1">periodPriorToIndex</a> specifies the period (i.e.&nbsp;number of days) before the index date from which treatments should be included.</p></li>
<li><p>Find Treatment History of Patients: Create the <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/4">treatment history</a> of a patient based on target, event, and exit cohorts. Then filter patient events based on the start and end dates of the target cohort. Third, Calculate the duration of treatment eras and the gap between treatments.</p></li>
<li><p>Filters: Filter the treatment history based on the <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/5">minEraDuration</a> parameter and <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/2">EraCollapse</a> parameter.</p></li>
<li><p>Create a Continuous Integration and Continuous Development pipeline for the package.</p></li>
<li><p>Implement the combinationWindow function, which combines treatments with various overlapping strategies.</p></li>
</ol>
<p>Additionally, we had a few stretch goals which were:</p>
<ol type="1">
<li><p>Composing with JuliaStats Ecosystem</p></li>
<li><p>Novel Visualizations for Pathways</p></li>
</ol>
</section>
<section id="tasks" class="level1">
<h1>Tasks</h1>
<section id="setting-up-the-package-in-juliahealth-channel" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-the-package-in-juliahealth-channel">1. Setting Up the Package in JuliaHealth Channel</h2>
<p>Initially, there was no package as such for generating pathways, so I had to build it from scratch. First, I created the repository with the name <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl">OMOPCDMPathways.jl</a>. Once the repository was created, we needed to have a skeleton for a standard Julia repository. For this, we used the <a href="https://juliaci.github.io/PkgTemplates.jl/stable/user/">PkgTemplates.jl</a> this provided a basic skeleton for the repository that included - folders for test suites, documentation, src code files, GitHub files, README and LICENSE file, TOML and citation files. All this we can further edit and modify as per our work. By default, PkgTemplate.jl uses <a href="https://documenter.juliadocs.org/stable/">Documenter.jl</a> for the documentation part but as suggested and discussed with my mentor we decided to shift to <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/">DocumenterVitepress.jl</a> for the documentation part. However, we still faced some deployment issues in the new documentation due to a few mistakes in the <code>make.jl</code> file, thanks to <a href="https://github.com/asinghvi17">Anshul Singhvi</a> for helping fix the <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/15">Deployment issues with DocumenterVitepress</a>. With this, we were ready with the documentation set up and fully functional. After we had shifted to DocumenterVitepress the main task now was to host the documentation, this was done using Github-Actions, detailed steps for hosting are provided at <a href="https://documenter.juliadocs.org/stable/man/hosting/#Hosting-Documentation">this</a> page. Then we added the CodeCov to our package by triggering it via a dummy function and a corresponding test case for it. Also, the CI for the package was set up with it. And, now finally the repository was ready with test coverage, CI, and documentation fully functional repository ready. Here’s some snapshots of the documentation set-up:</p>
<p><img src="./image.png" class="img-fluid"></p>
<blockquote class="blockquote">
<p>Initial documentation with Documenter.jl</p>
</blockquote>
<p><img src="./img2.png" class="img-fluid"></p>
<blockquote class="blockquote">
<p>New documentation using DocumenterVitepress.jl</p>
</blockquote>
<p>So, as a part of it, I created this <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/documenter_to_vitepress_docs_example">documentation</a> which provides detailed steps for converting docs from Documenter to DocumenterVitepress.</p>
</section>
<section id="loading-the-postgresql-database" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-postgresql-database">2. Loading the PostgreSQL Database</h2>
<p>The main database we worked on/built analysis was the freely available OMOPCDM Database. The Database was formatted within a PostgreSQL database with <a href="https://www.devart.com/dbforge/postgresql/how-to-install-postgresql-on-linux/">installation instructions here</a> are some instructions on how to set up Postgres in a Linux machine. However, I was provided with some more extra synthetic data from my mentor for further testing of the functionalities. Being a very large database we had to strategically download it further, my mentor helped me in setting up the Postgres on my local machine. Once, the database was set up proper testing was performed on it to check if things were as expected. With this, we were done with the database setup as well and could finally dive into the actual code logic for the Pathways synthesis.</p>
</section>
<section id="testing-and-development-setup-on-my-local-computer" class="level2">
<h2 class="anchored" data-anchor-id="testing-and-development-setup-on-my-local-computer">3. Testing and Development setup on my local computer</h2>
<p>To get a proper environment for functionality creation and concurrent testing we required a proper testing setup so that we could test the new functions made at the same time. This was done using <a href="https://timholy.github.io/Revise.jl/stable/">Revise.jl</a>, which helps to keep Julia sessions running without frequent restarts when making changes to code. It allowed me to edit my code, update packages, or switch git branches during a session, with changes applied immediately in the next command. My mentor helped me set it up, added Revise.jl to the global Julia environment, also <a href="https://github.com/GunnarFarneback/PackageCompatUI.jl">PackageCompatUI</a> that provides a terminal text interface to the [compat] section of a Julia Project.toml file, and finally made a Julia script by the name “startup.jl” out of it. This script was then added to <code>/home/jay-sanjay/.julia/config/</code> path in my local computer.</p>
<p>Here is the sample for the startup.jl file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">using</span> <span class="bu">PackageCompatUI</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">using</span> <span class="bu">PkgTemplates</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">using</span> <span class="bu">Revise</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">###################################</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># HELPER FUNCTIONS</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">###################################</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">function</span> <span class="fu">template</span>()</span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="fu">Template</span>(;</span>
<span id="cb1-10"><a href="#cb1-10"></a>        user<span class="op">=</span><span class="st">"jay-sanjay"</span>,</span>
<span id="cb1-11"><a href="#cb1-11"></a>        dir<span class="op">=</span><span class="st">"~/FOSS"</span>,</span>
<span id="cb1-12"><a href="#cb1-12"></a>        authors<span class="op">=</span><span class="st">"jaysanjay &lt;jaysanjay@gmail.com&gt; and contributors"</span>,</span>
<span id="cb1-13"><a href="#cb1-13"></a>        julia<span class="op">=</span><span class="st">v"1.6"</span>,</span>
<span id="cb1-14"><a href="#cb1-14"></a>        plugins<span class="op">=</span>[</span>
<span id="cb1-15"><a href="#cb1-15"></a>            <span class="fu">ProjectFile</span>(; version<span class="op">=</span><span class="st">v"0.0.1"</span>),</span>
<span id="cb1-16"><a href="#cb1-16"></a>            <span class="fu">Git</span>(),</span>
<span id="cb1-17"><a href="#cb1-17"></a>            <span class="fu">Readme</span>(),</span>
<span id="cb1-18"><a href="#cb1-18"></a>            <span class="fu">License</span>(; name<span class="op">=</span><span class="st">"MIT"</span>),</span>
<span id="cb1-19"><a href="#cb1-19"></a>            <span class="fu">GitHubActions</span>(; extra_versions<span class="op">=</span>[<span class="st">"1.6"</span>, <span class="st">"1"</span>, <span class="st">"nightly"</span>]),</span>
<span id="cb1-20"><a href="#cb1-20"></a>            <span class="fu">TagBot</span>(),</span>
<span id="cb1-21"><a href="#cb1-21"></a>            <span class="fu">Codecov</span>(),</span>
<span id="cb1-22"><a href="#cb1-22"></a>            <span class="fu">Documenter</span><span class="dt">{GitHubActions}</span>(),</span>
<span id="cb1-23"><a href="#cb1-23"></a>            <span class="fu">Citation</span>(; readme <span class="op">=</span> <span class="cn">true</span>),</span>
<span id="cb1-24"><a href="#cb1-24"></a>            <span class="fu">RegisterAction</span>(),</span>
<span id="cb1-25"><a href="#cb1-25"></a>            <span class="fu">BlueStyleBadge</span>(),</span>
<span id="cb1-26"><a href="#cb1-26"></a>            <span class="fu">Formatter</span>(;style <span class="op">=</span> <span class="st">"blue"</span>)</span>
<span id="cb1-27"><a href="#cb1-27"></a>        ],</span>
<span id="cb1-28"><a href="#cb1-28"></a>    )</span>
<span id="cb1-29"><a href="#cb1-29"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="selecting-treatments-of-interest" class="level2">
<h2 class="anchored" data-anchor-id="selecting-treatments-of-interest">4. Selecting Treatments of Interest</h2>
<p>So, as a part of this, we used the previously mentioned research paper and discussion with the mentors we came up with logic for it. The first thing to do was to determine the moment in time from which selected treatments of interest should be included in the treatment pathway. The default is all treatments starting after the index date of the target cohort. For example, for a target cohort consisting of newly diagnosed patients, treatments after the moment of first diagnosis are included. However, it would also be desirable to include (some) treatments before the index date, for instance in case a specific disease diagnosis is only confirmed after initiating treatment. Therefore, periodPriorToIndex specifies the period (i.e.&nbsp;number of days) before the index date from which treatments should be included. We have created two dispatches for this function. After that proper testing and documentation are also added.</p>
<p>A basic implementation for it is:</p>
<ol type="1">
<li><p>Construct a SQL query to select cohort_definition_id, subject_id, and cohort_start_date from a specified table, filtering by cohort_id.</p></li>
<li><p>The SQL query construction and execution was done using the <a href="https://mechanicalrabbit.github.io/FunSQL.jl/stable/">FunSQL.jl</a> library, in the below-shown manner:</p></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1"></a>sql <span class="op">=</span> <span class="fu">From</span>(tab) <span class="op">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>            <span class="fu">Where</span>(Fun.<span class="fu">in</span>(Get.cohort_definition_id, cohort_id<span class="op">...</span>)) <span class="op">|&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>            <span class="fu">Select</span>(Get.cohort_definition_id, Get.subject_id, Get.cohort_start_date) <span class="op">|&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>            q <span class="op">-&gt;</span> <span class="fu">render</span>(q, dialect<span class="op">=</span>dialect)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li><p>Executes the constructed SQL query using a database connection, fetching the results into a data frame.</p></li>
<li><p>If the DataFrame is not empty, convert cohort_start_date to DateTime and subtract date_prior from each date, then return the modified DataFrame.</p></li>
</ol>
<p>This was then be called this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">period_prior_to_index</span>(</span>
<span id="cb3-2"><a href="#cb3-2"></a>        cohort_id <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>], </span>
<span id="cb3-3"><a href="#cb3-3"></a>        conn; </span>
<span id="cb3-4"><a href="#cb3-4"></a>        date_prior <span class="op">=</span> <span class="fu">Day</span>(<span class="fl">100</span>), </span>
<span id="cb3-5"><a href="#cb3-5"></a>        tab<span class="op">=</span>cohort</span>
<span id="cb3-6"><a href="#cb3-6"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="filters-applied" class="level2">
<h2 class="anchored" data-anchor-id="filters-applied">5. Filters Applied</h2>
<p>After this, we where needed to get the patient’s database filtered more finely so that there are minimal variations that can be ignored. The duration of the above extracted event eras may vary a lot and it can be preferable to limit to only treatments exceeding a minimum duration. Hence, minEraDuration speciﬁes the minimum time an event era should last to be included in the analysis. All these implementations were more of Dataframe manipulation where I used <a href="https://dataframes.juliadata.org/stable/">DataFrames.jl</a> package.</p>
<p>After that proper testing and documentation are also added.</p>
<p>A basic implementation for the minEraDuration is: It filters the treatment history <code>DataFrame</code> to retain only those rows where the duration between <code>drug_exposure_end</code> and <code>drug_exposure_start</code> is at least <code>minEraDuration</code>. This function can be used as follows:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">#| eval: false </span></span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">calculate_era_duration</span>(test_df, <span class="fl">920000</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#= ... =#</span></span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="fl">4</span><span class="op">×</span><span class="fl">3</span> DataFrame</span>
<span id="cb4-8"><a href="#cb4-8"></a> Row │ person_id  drug_exposure_start  drug_exposure_end </span>
<span id="cb4-9"><a href="#cb4-9"></a>     │ <span class="dt">Int64</span>      <span class="dt">Float64</span>              <span class="dt">Int64</span>             </span>
<span id="cb4-10"><a href="#cb4-10"></a>─────┼───────────────────────────────────────────────────</span>
<span id="cb4-11"><a href="#cb4-11"></a>   <span class="fl">1</span> │         <span class="fl">1</span>           <span class="op">-</span><span class="fl">3.7273e8</span>          <span class="op">-</span><span class="fl">364953600</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>   <span class="fl">2</span> │         <span class="fl">1</span>            <span class="fl">2.90304e7</span>           <span class="fl">31449600</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>   <span class="fl">3</span> │         <span class="fl">1</span>           <span class="op">-</span><span class="fl">8.18208e7</span>          <span class="op">-</span><span class="fl">80006400</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>   <span class="fl">4</span> │         <span class="fl">1</span>            <span class="fl">1.32918e9</span>         <span class="fl">1330387200</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Another filter we worked on is the EraCollapse. So, let’s suppose a case where an individual receives the same treatment for a long period of time (e.g.&nbsp;need for chronic treatment). Then it’s highly likely that the person would require refills. Now as patients are not 100% adherent, there might be a gap between two subsequent event eras. Usually, these eras are still considered as one treatment episode, and the eraCollapseSize deals with the maximum gap within which two eras of the same event cohort would be collapsed into one era (i.e.&nbsp;seen as a continuous treatment instead of a stop and re-initiation of the same treatment). After that proper testing and documentation are also added.</p>
<p>A basic implementation for the eraCollapseSize is: (a) Sorts the data frame by event_start_date and event_end_date. (b) Calculates the gap between each era and the previous era. (c) Filters out rows with gap_same &gt; eraCollapseSize.</p>
<p>These functions can be used as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">#| eval: false </span></span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#= ... =#</span></span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">EraCollapse</span>(treatment_history <span class="op">=</span> test_df, eraCollapseSize <span class="op">=</span> <span class="fl">400000000</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fl">4</span><span class="op">×</span><span class="fl">4</span> DataFrame</span>
<span id="cb5-7"><a href="#cb5-7"></a> Row │ person_id  drug_exposure_start  drug_exposure_end  gap_same   </span>
<span id="cb5-8"><a href="#cb5-8"></a>     │ <span class="dt">Int64</span>      <span class="dt">Float64</span>              <span class="dt">Int64</span>              <span class="dt">Float64</span>    </span>
<span id="cb5-9"><a href="#cb5-9"></a>─────┼───────────────────────────────────────────────────────────────</span>
<span id="cb5-10"><a href="#cb5-10"></a>   <span class="fl">1</span> │         <span class="fl">1</span>           <span class="op">-</span><span class="fl">5.33347e8</span>         <span class="op">-</span><span class="fl">532483200</span>  <span class="op">-</span><span class="fl">1.86373e9</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>   <span class="fl">2</span> │         <span class="fl">1</span>           <span class="op">-</span><span class="fl">3.7273e8</span>          <span class="op">-</span><span class="fl">364953600</span>   <span class="fl">1.59754e8</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>   <span class="fl">3</span> │         <span class="fl">1</span>           <span class="op">-</span><span class="fl">8.18208e7</span>          <span class="op">-</span><span class="fl">80006400</span>   <span class="fl">2.83133e8</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>   <span class="fl">4</span> │         <span class="fl">1</span>            <span class="fl">2.90304e7</span>           <span class="fl">31449600</span>   <span class="fl">1.09037e8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="treatment-history-of-the-patients" class="level2">
<h2 class="anchored" data-anchor-id="treatment-history-of-the-patients">6. Treatment History of the Patients</h2>
<p>The <code>create_treatment_history</code> function constructs a detailed treatment history for patients in a target cohort by processing and filtering event cohort data from a given DataFrame. It begins by isolating the target cohort based on its <code>cohort_id</code>, adding a new column for the <code>index_year</code> derived from the cohort’s start date. Then, it selects relevant event cohorts based on a provided list of cohort IDs and merges them with the target cohort on the <code>subject_id</code> to associate events with individuals in the target group. The function applies different filtering criteria depending on whether the user is interested in treatments starting or ending within a specified period before the target cohort’s start date (defined by <code>periodPriorToIndex</code>). It keeps only the event cohorts that match the filtering condition, ensuring that only relevant treatments are considered. After filtering, the function calculates time gaps between consecutive cohort events for each patient, adding these gaps to the DataFrame. The final DataFrame provides a history of treatments, including the dates of events and the time intervals between them, offering a clear timeline of treatment for each patient. After that proper testing and documentation are also added.</p>
</section>
<section id="combinationwindow-functionality-to-combine-overlapping-treatments" class="level2">
<h2 class="anchored" data-anchor-id="combinationwindow-functionality-to-combine-overlapping-treatments">7. CombinationWindow Functionality To Combine Overlapping Treatments</h2>
<p>Now once we have the filtering of the treatments done, we need to combine the overlapping treatments based on some set of rules. The combinationWindow specifies the time that two event eras need to overlap to be considered a combination treatment. If there are more than two overlapping event eras, we sequentially combine treatments, starting from the ﬁrst two overlapping event eras.</p>
<p>The <code>combination_Window</code> function processes a patient’s treatment history by identifying overlapping treatment events and combining them into continuous treatment periods based on certain rules. It first converts <code>event_cohort_id</code> into strings and sorts the treatment data by <code>person_id</code>, <code>event_start_date</code>, and <code>event_end_date</code>. The helper function <code>selectRowsCombinationWindow</code> calculates gaps between consecutive treatments, marking rows where treatments overlap or occur too closely. In the main loop, the function checks these overlaps and gaps against a specified <code>combinationWindow</code>. If treatments overlap (or nearly overlap), the function adjusts the treatment periods by either merging adjacent rows or splitting rows to create continuous treatment periods. The process continues until all overlapping treatments are combined into one, creating an updated and accurate treatment history. The function ensures the final output reflects realistic treatment windows by handling special cases where gaps between treatments are smaller than the treatment durations themselves.</p>
<p>It mainly covers the three cases mentioned in the R-research paper:</p>
<section id="switch-case" class="level3">
<h3 class="anchored" data-anchor-id="switch-case">Switch Case:</h3>
<p><em>Condition</em>: If the gap between the two treatment events is smaller than the combinationWindow, but the gap is not equal to the duration of either event. <em>Action</em>: The event_end_date of the previous treatment is set to the event_start_date of the current treatment. This effectively “shifts” the previous treatment’s end date to eliminate the gap, merging the treatments into one continuous period. <em>Purpose</em>: This ensures that treatment gaps that are too small (less than combinationWindow) are treated as part of the same treatment window.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#| eval: false </span></span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#= ... =#</span></span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="cf">if</span> <span class="op">-</span>gap_previous <span class="op">&lt;</span> combinationWindow <span class="op">&amp;&amp;</span> !(<span class="op">-</span>gap_previous <span class="kw">in</span> [duration_era, prev_duration_era])</span>
<span id="cb6-6"><a href="#cb6-6"></a>    treatment_history[i<span class="op">-</span><span class="fl">1</span>, <span class="op">:</span>event_end_date] <span class="op">=</span> treatment_history[i, <span class="op">:</span>event_start_date]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is the pictorial representation for the same: <img src="./case1.png" class="img-fluid"></p>
</section>
<section id="frfs-first-row-first-shortened" class="level3">
<h3 class="anchored" data-anchor-id="frfs-first-row-first-shortened">FRFS (First Row, First Shortened):</h3>
<p><em>Condition</em>: If the gap is larger than or equal to the combinationWindow, or the gap equals the duration of one of the two treatments, and the first treatment ends before or on the same date as the second treatment. <em>Action</em>: A new row is created where the second treatment’s event_end_date is set to the end date of the first treatment. This preserves the overlap but ensures that the earlier treatment period stays intact. <em>Purpose</em>: This prevents unnecessary truncation of the first treatment if it spans the entire overlap window.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">#| eval: false </span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">#= ... =#</span></span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a>elseif <span class="op">-</span>gap_previous <span class="op">&gt;=</span> combinationWindow <span class="op">||</span> <span class="op">-</span>gap_previous <span class="kw">in</span> [duration_era, prev_duration_era]</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="cf">if</span> treatment_history[i<span class="op">-</span><span class="fl">1</span>, <span class="op">:</span>event_end_date] <span class="op">&lt;=</span> treatment_history[i, <span class="op">:</span>event_end_date]</span>
<span id="cb7-7"><a href="#cb7-7"></a>        new_row <span class="op">=</span> <span class="fu">deepcopy</span>(treatment_history[i, <span class="op">:</span>])</span>
<span id="cb7-8"><a href="#cb7-8"></a>        new_row.event_end_date <span class="op">=</span> treatment_history[i<span class="op">-</span><span class="fl">1</span>, <span class="op">:</span>event_end_date]</span>
<span id="cb7-9"><a href="#cb7-9"></a>        <span class="fu">append!</span>(treatment_history, <span class="fu">DataFrame</span>(new_row<span class="op">'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is the pictorial representation for the same: <img src="./case2.png" class="img-fluid"></p>
</section>
<section id="lrfs-last-row-first-shortened" class="level3">
<h3 class="anchored" data-anchor-id="lrfs-last-row-first-shortened">LRFS (Last Row, First Shortened):</h3>
<p><em>Condition</em>: If the gap is larger than or equal to the combinationWindow, or the gap equals the duration of one of the treatments, and the first treatment ends after the second treatment. <em>Action</em>: The current treatment’s event_end_date is adjusted to match the event_end_date of the previous treatment. <em>Purpose</em>: This handles cases where the second treatment’s window should be shortened to prevent overlap with the previous treatment, merging them into a single continuous window.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource julia number-lines code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">#| eval: false </span></span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#= ... =#</span></span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a>else</span>
<span id="cb8-6"><a href="#cb8-6"></a>    treatment_history[i, <span class="op">:</span>event_end_date] <span class="op">=</span> treatment_history[i<span class="op">-</span><span class="fl">1</span>, <span class="op">:</span>event_end_date]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is the pictorial representation for the same: <img src="./case3.png" class="img-fluid"></p>
<blockquote class="blockquote">
<p><em>Note:</em> However, There are a few things left to cover here, most of which are the documentation and writing the test suite for the same.</p>
</blockquote>
</section>
</section>
</section>
<section id="contributions-beyond-coding" class="level1">
<h1>Contributions Beyond Coding</h1>
<section id="organizing-meetings-and-communication" class="level2">
<h2 class="anchored" data-anchor-id="organizing-meetings-and-communication">1. Organizing Meetings and Communication</h2>
<p>Throughout the project, I regularly met with my mentor, [Jacob Zelko], and co-mentor, [Mounika], via weekly Zoom calls to discuss progress and seek guidance. During these meetings, we reviewed my work, identified areas where I needed help, and set clear goals for the upcoming weeks. We used Trello to organize and track these goals, ensuring that nothing was overlooked. My mentors provided detailed insights into specific technical aspects and guided me through the logic behind various functions. Outside of our scheduled meetings, they were always available for quick queries via Slack, ensuring constant support.</p>
</section>
<section id="personal-documentation" class="level2">
<h2 class="anchored" data-anchor-id="personal-documentation">2. Personal Documentation</h2>
<p>In addition to the notes from our meetings, I maintained personal documentation where I recorded every step I took, including the challenges I faced and the mistakes I made. This helped me reflect on my progress and stay organized throughout the fellowship. Following my selection for GSoC 2024, I also published a blog post on <a href="https://medium.com/@landgejay124/gsoc-24-the-julia-language-62b809bbec49">Medium</a> to share my journey and experiences with the Julia Language community.</p>
</section>
<section id="contributions-to-the-rest-of-the-juliahealth-repositories" class="level2">
<h2 class="anchored" data-anchor-id="contributions-to-the-rest-of-the-juliahealth-repositories">3. Contributions To the Rest of the JuliaHealth Repositories</h2>
<p>Earlier I have contributed a lot to the <a href="https://github.com/JuliaHealth/OMOPCDMCohortCreator.jl">OMOPCDMCohortCreator.jl</a> including adding new functionalities writing test suites, adding blogs including - <a href="https://github.com/JuliaHealth/juliahealth.github.io/pull/124">Patient Pathways within JuliaHealth</a>. Apart from that I also initiated 3 new releases of this package.</p>
</section>
</section>
<section id="conclusions-and-future-development" class="level1">
<h1>Conclusions and Future Development</h1>
<p>This project was a 350-hour large project since there were many goals to accomplish. Here is what we accomplished:</p>
<ol type="1">
<li><p>Built a new repository in JuliaHealth land dedicated especially to treatment pathways synthesis.</p></li>
<li><p>CI/CD for the Package and Documentation hosting.</p></li>
<li><p>All required basic functionalities required to build the pathways.</p></li>
<li><p>Documentation and test suites added for each.</p></li>
</ol>
<p>Future work would include:</p>
<ul>
<li><p>Finish this <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/pull/63">PR</a> test-suites and documentation are remaining for this PR.</p></li>
<li><p>Apart from that, we would need to add a <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/9">function</a> that sews up all the functionalities of the package so that the user can run the complete pathways analysis by running just one function instead of running each of the functions manually.</p></li>
<li><p>Also, in the future, we would explore what statistical functionalities we would need to further explore pathways.</p></li>
<li><p>Then, we could explore how to compose JuliaHealth with packages from ecosystems like <a href="https://juliastats.org/">JuliaStats</a> and <a href="https://docs.juliadsp.org/stable/contents/">JuliaDSP</a> (for time series analysis) that are mentioned in this <a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/8">PR</a>.</p></li>
<li><p>And finally work on creating novel visualizations for the Pathways. Commonly used visualizations for treatment pathways (such as sunburst or icicle plots) showing which patients fall under what treatment pathways could be developed as plotting recipes to visualize various aspects of a patient’s care pathway rapidly.</p></li>
</ul>
</section>
<section id="acknowledgements" class="level1">
<h1>Acknowledgements 🙇‍♂️</h1>
<ol type="1">
<li><p><a href="https://jacobzelko.com">Jacob S. Zelko</a>: aka, <a href="https://github.com/TheCedarPrince">TheCedarPrince</a></p></li>
<li><p><a href="https://www.linkedin.com/in/mounika-thakkallapally/">Mounika Thakkallapally</a></p></li>
</ol>
<p>Thank you for your continuous help and support throughout the fellowship. <em>Note: This blog post was also written with the assistance of LLM technologies to help with grammar, flow, and spelling!</em></p>


<!-- -->


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-markus2022treatmentpatterns" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">A. F. Markus, K. M. Verhamme, J. A. Kors, and P. R. Rijnbeek, <span>“TreatmentPatterns: An r package to facilitate the standardized development and analysis of treatment patterns across disease domains,”</span> <em>Computer Methods and Programs in Biomedicine</em>, vol. 225, p. 107081, 2022.</div>
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sanjay_landge2024,
  author = {Sanjay Landge, Jay},
  title = {GSoC ’24: {Developing} {Tooling} for {Observational} {Health}
    {Research} in {Julia}},
  date = {2024-09-07},
  url = {https://juliahealth.org/JuliaHealthBlog/posts/jay-gsoc/gsoc-2024-fellows.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sanjay_landge2024" class="csl-entry quarto-appendix-citeas" role="listitem">
<div class="">J.
Sanjay Landge, <span>“GSoC ’24: Developing Tooling for Observational
Health Research in Julia,”</span> Sep. 07, 2024. Available: <a href="https://juliahealth.org/JuliaHealthBlog/posts/jay-gsoc/gsoc-2024-fellows.html">https://juliahealth.org/JuliaHealthBlog/posts/jay-gsoc/gsoc-2024-fellows.html</a></div>
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/juliahealth\.org\/JuliaHealthBlog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="JuliaHealth/JuliaHealthBlog" issue-term="title" theme="github-dark" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb9" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">---</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="an">title:</span><span class="co"> "GSoC '24: Developing Tooling for Observational Health Research in Julia"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="an">description:</span><span class="co"> "A summary of my project for Google Summer of Code - 2024"</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="an">author:</span><span class="co"> "Jay Sanjay Landge"</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="an">date:</span><span class="co"> "9/7/2024"</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="an">bibliography:</span><span class="co"> ./references.bib</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="an">csl:</span><span class="co"> ./../../ieee-with-url.csl</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="an">engine:</span><span class="co"> julia</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="an">image:</span><span class="co"> false</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="an">categories:</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">  - gsoc</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">  - sql</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">  - observational health </span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">  - analysis</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">---</span></span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="fu"># Hi Everyone! 👋</span></span>
<span id="cb9-20"><a href="#cb9-20"></a></span>
<span id="cb9-21"><a href="#cb9-21"></a>I am Jay Sanjay, and I am pursuing a Bachelor's degree in Computational Sciences and Engineering at the Indian Institute of Technology (IIT) in Hyderabad, India. Coming from a mathematics and data analysis background, I was initially introduced to Julia at my university lectures. Later, I delved more into the language and the JuliaHealth community - an intersection of Julia, Health Research, Data Sciences, and Informatics. Here, I met some of the great folks in JuliaHealth and I decided to take it on as a full-fledged summer project. </span>
<span id="cb9-22"><a href="#cb9-22"></a>In this blog, I will briefly describe what my project is and what I did as a part of it.</span>
<span id="cb9-23"><a href="#cb9-23"></a></span>
<span id="cb9-24"><a href="#cb9-24"></a></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="ss">1. </span>You can find my <span class="co">[</span><span class="ot">**GSoC project archive link**</span><span class="co">](https://summerofcode.withgoogle.com/archive/2024/projects/ZXVIYAXG)</span></span>
<span id="cb9-26"><a href="#cb9-26"></a></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="ss">2. </span>You can also find the related publication of my work on <span class="co">[</span><span class="ot">**Zenodo**</span><span class="co">](https://zenodo.org/records/14674051)</span></span>
<span id="cb9-28"><a href="#cb9-28"></a></span>
<span id="cb9-29"><a href="#cb9-29"></a><span class="ss">3. </span>If you want to know more about me, you can connect with me on <span class="co">[</span><span class="ot">**LinkedIn**</span><span class="co">](https://www.linkedin.com/in/jay-landge-589439260/)</span> and follow me on <span class="co">[</span><span class="ot">**GitHub**</span><span class="co">](https://github.com/Jay-sanjay)</span></span>
<span id="cb9-30"><a href="#cb9-30"></a></span>
<span id="cb9-31"><a href="#cb9-31"></a></span>
<span id="cb9-32"><a href="#cb9-32"></a><span class="fu"># Background</span></span>
<span id="cb9-33"><a href="#cb9-33"></a></span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="fu">## What Is Observational Health Research?</span></span>
<span id="cb9-35"><a href="#cb9-35"></a></span>
<span id="cb9-36"><a href="#cb9-36"></a>Observational Health Research refers to studies that analyze real-world data (such as patient medical claims, electronic health records, etc.) to understand patient health. These studies often encompass a vast amount of data concerning patient care. An outstanding challenge here is that these datasets can become very complex and grow large enough to require advanced computing methods to process this information.</span>
<span id="cb9-37"><a href="#cb9-37"></a></span>
<span id="cb9-38"><a href="#cb9-38"></a><span class="fu">## What Are Patient Pathways?</span></span>
<span id="cb9-39"><a href="#cb9-39"></a></span>
<span id="cb9-40"><a href="#cb9-40"></a>Patient pathways refer to the journey that patients with specific medical conditions undergo in terms of their treatment. This concept goes beyond simple drug uptake statistics and looks at the sequence of treatments patients receive over time, including first-line treatments and subsequent therapies. Understanding patient pathways is essential for analyzing treatment patterns, adherence to clinical guidelines, and the disbursement of drugs.</span>
<span id="cb9-41"><a href="#cb9-41"></a>To analyze patient pathways, one would typically use real-world data from sources such as electronic health records, claims data, and registries. However, barriers such as data interoperability and resource requirements have hindered the full utilization of real-world data for this purpose.</span>
<span id="cb9-42"><a href="#cb9-42"></a></span>
<span id="cb9-43"><a href="#cb9-43"></a>So to address these challenges we (the JuliaHealth organization and I) want to develop a set of tools to extract and analyze these patient pathways. These sets of tools are based on the Observational Medical Outcomes Partnership (OMOP) Common Data Model, which standardizes healthcare data to promote interoperability.</span>
<span id="cb9-44"><a href="#cb9-44"></a></span>
<span id="cb9-45"><a href="#cb9-45"></a></span>
<span id="cb9-46"><a href="#cb9-46"></a><span class="fu"># Project Description</span></span>
<span id="cb9-47"><a href="#cb9-47"></a></span>
<span id="cb9-48"><a href="#cb9-48"></a>As part of this project with JuliaHealth, I developed a new package called <span class="co">[</span><span class="ot">**OMOPCDMPathways.jl**</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl)</span>. This package is designed for deployment in research projects, particularly those related to health and medical data analysis. This project takes much inspiration from the paper <span class="co">[</span><span class="ot">_TreatmentPatterns: An r package to facilitate the standardized development and analysis of treatment patterns across disease domains_</span><span class="co">](https://www.sciencedirect.com/science/article/pii/S016926072200462X?via%3Dihub)</span> <span class="co">[</span><span class="ot">@markus2022treatmentpatterns</span><span class="co">]</span> and explores the implementation of some of those ideas to develop new tools within the JuliaHealth Observational Health Subecosystem for exploring patient pathways. Additional new features and approaches were added and explored within this project. Additionally, I have authored a developer guide for the package, providing instructions on its use and contribution. This project provided me with hands-on experience in developing production-level code and exposed me to open-source software development practices. I had the opportunity to work in a team, under my mentors, and ensured the integration of the package with the rest of JuliaHealth, facilitating its adoption and usability within the community. </span>
<span id="cb9-49"><a href="#cb9-49"></a></span>
<span id="cb9-50"><a href="#cb9-50"></a><span class="fu"># Project Goals</span></span>
<span id="cb9-51"><a href="#cb9-51"></a></span>
<span id="cb9-52"><a href="#cb9-52"></a>As a part of the development, I was majorly engaged in crafting the following functionalities:</span>
<span id="cb9-53"><a href="#cb9-53"></a></span>
<span id="cb9-54"><a href="#cb9-54"></a><span class="ss">1. </span>Selecting treatments of interest:  The first decision that was made was to decide the time from which the desired treatments of interest should be included in the treatment pathway study. Here the <span class="co">[</span><span class="ot">periodPriorToIndex</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/1)</span> specifies the period (i.e. number of days) before the index date from which treatments should be included.</span>
<span id="cb9-55"><a href="#cb9-55"></a></span>
<span id="cb9-56"><a href="#cb9-56"></a><span class="ss">2. </span>Find Treatment History of Patients:  Create the <span class="co">[</span><span class="ot">treatment history</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/4)</span> of a patient based on target, event, and exit cohorts. Then filter patient events based on the start and end dates of the target cohort. Third, Calculate the duration of treatment eras and the gap between treatments.</span>
<span id="cb9-57"><a href="#cb9-57"></a></span>
<span id="cb9-58"><a href="#cb9-58"></a><span class="ss">3. </span>Filters: Filter the treatment history based on the <span class="co">[</span><span class="ot">minEraDuration</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/5)</span> parameter and <span class="co">[</span><span class="ot">EraCollapse</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/2)</span> parameter.</span>
<span id="cb9-59"><a href="#cb9-59"></a></span>
<span id="cb9-60"><a href="#cb9-60"></a><span class="ss">4. </span>Create a Continuous Integration and Continuous Development pipeline for the package. </span>
<span id="cb9-61"><a href="#cb9-61"></a></span>
<span id="cb9-62"><a href="#cb9-62"></a><span class="ss">5. </span>Implement the combinationWindow function, which combines treatments with various overlapping strategies.</span>
<span id="cb9-63"><a href="#cb9-63"></a></span>
<span id="cb9-64"><a href="#cb9-64"></a>Additionally, we had a few stretch goals which were:</span>
<span id="cb9-65"><a href="#cb9-65"></a></span>
<span id="cb9-66"><a href="#cb9-66"></a><span class="ss">1. </span>Composing with JuliaStats Ecosystem</span>
<span id="cb9-67"><a href="#cb9-67"></a></span>
<span id="cb9-68"><a href="#cb9-68"></a><span class="ss">2. </span>Novel Visualizations for Pathways</span>
<span id="cb9-69"><a href="#cb9-69"></a></span>
<span id="cb9-70"><a href="#cb9-70"></a><span class="fu"># Tasks</span></span>
<span id="cb9-71"><a href="#cb9-71"></a></span>
<span id="cb9-72"><a href="#cb9-72"></a><span class="fu">## 1. Setting Up the Package in JuliaHealth Channel</span></span>
<span id="cb9-73"><a href="#cb9-73"></a></span>
<span id="cb9-74"><a href="#cb9-74"></a>Initially, there was no package as such for generating pathways, so I had to build it from scratch. First, I created the repository with the name <span class="co">[</span><span class="ot">OMOPCDMPathways.jl</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl)</span>. Once the repository was created, we needed to have a skeleton for a standard Julia repository. For this, we used the <span class="co">[</span><span class="ot">PkgTemplates.jl</span><span class="co">](https://juliaci.github.io/PkgTemplates.jl/stable/user/)</span> this provided a basic skeleton for the repository that included - folders for test suites, documentation, src code files, GitHub files, README and LICENSE file, TOML and citation files. All this we can further edit and modify as per our work. By default, PkgTemplate.jl uses <span class="co">[</span><span class="ot">Documenter.jl</span><span class="co">](https://documenter.juliadocs.org/stable/)</span> for the documentation part but as suggested and discussed with my mentor we decided to shift to <span class="co">[</span><span class="ot">DocumenterVitepress.jl</span><span class="co">](https://luxdl.github.io/DocumenterVitepress.jl/dev/)</span> for the documentation part. However, we still faced some deployment issues in the new documentation due to a few mistakes in the <span class="in">`make.jl`</span> file, thanks to <span class="co">[</span><span class="ot">Anshul Singhvi</span><span class="co">](https://github.com/asinghvi17)</span> for helping fix the <span class="co">[</span><span class="ot">Deployment issues with DocumenterVitepress</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/15)</span>. With this, we were ready with the documentation set up and fully functional. After we had shifted to DocumenterVitepress the main task now was to host the documentation, this was done using Github-Actions, detailed steps for hosting are provided at <span class="co">[</span><span class="ot">this</span><span class="co">](https://documenter.juliadocs.org/stable/man/hosting/#Hosting-Documentation)</span> page. Then we added the CodeCov to our package by triggering it via a dummy function and a corresponding test case for it. Also, the CI for the package was set up with it. And, now finally the repository was ready with test coverage, CI, and documentation fully functional repository ready. Here's some snapshots of the documentation set-up:</span>
<span id="cb9-75"><a href="#cb9-75"></a></span>
<span id="cb9-76"><a href="#cb9-76"></a><span class="al">![](./image.png)</span></span>
<span id="cb9-77"><a href="#cb9-77"></a></span>
<span id="cb9-78"><a href="#cb9-78"></a><span class="at">&gt; Initial documentation with Documenter.jl</span></span>
<span id="cb9-79"><a href="#cb9-79"></a></span>
<span id="cb9-80"><a href="#cb9-80"></a><span class="al">![](./img2.png)</span></span>
<span id="cb9-81"><a href="#cb9-81"></a></span>
<span id="cb9-82"><a href="#cb9-82"></a><span class="at">&gt; New documentation using DocumenterVitepress.jl</span></span>
<span id="cb9-83"><a href="#cb9-83"></a></span>
<span id="cb9-84"><a href="#cb9-84"></a>So, as a part of it, I created this <span class="co">[</span><span class="ot">documentation</span><span class="co">](https://luxdl.github.io/DocumenterVitepress.jl/dev/documenter_to_vitepress_docs_example)</span> which provides detailed steps for converting docs from Documenter to DocumenterVitepress.</span>
<span id="cb9-85"><a href="#cb9-85"></a></span>
<span id="cb9-86"><a href="#cb9-86"></a><span class="fu">## 2. Loading the PostgreSQL Database</span></span>
<span id="cb9-87"><a href="#cb9-87"></a></span>
<span id="cb9-88"><a href="#cb9-88"></a>The main database we worked on/built analysis was the freely available OMOPCDM Database. The Database was formatted within a PostgreSQL database with <span class="co">[</span><span class="ot">installation instructions here</span><span class="co">](https://www.devart.com/dbforge/postgresql/how-to-install-postgresql-on-linux/)</span> are some instructions on how to set up Postgres in a Linux machine. However, I was provided with some more extra synthetic data from my mentor for further testing of the functionalities. Being a very large database we had to strategically download it further, my mentor helped me in setting up the Postgres on my local machine. Once, the database was set up proper testing was performed on it to check if things were as expected. With this, we were done with the database setup as well and could finally dive into the actual code logic for the Pathways synthesis.</span>
<span id="cb9-89"><a href="#cb9-89"></a></span>
<span id="cb9-90"><a href="#cb9-90"></a><span class="fu">## 3. Testing and Development setup on my local computer</span></span>
<span id="cb9-91"><a href="#cb9-91"></a> </span>
<span id="cb9-92"><a href="#cb9-92"></a>To get a proper environment for functionality creation and concurrent testing we required a proper testing setup so that we could test the new functions made at the same time. This was done using <span class="co">[</span><span class="ot">Revise.jl</span><span class="co">](https://timholy.github.io/Revise.jl/stable/)</span>, which helps to keep Julia sessions running without frequent restarts when making changes to code. It allowed me to edit my code, update packages, or switch git branches during a session, with changes applied immediately in the next command. My mentor helped me set it up, added Revise.jl to the global Julia environment, also <span class="co">[</span><span class="ot">PackageCompatUI</span><span class="co">](https://github.com/GunnarFarneback/PackageCompatUI.jl)</span> that provides a terminal text interface to the <span class="co">[</span><span class="ot">compat</span><span class="co">]</span> section of a Julia Project.toml file, and finally made a Julia script by the name “startup.jl” out of it. This script was then added to <span class="in">`/home/jay-sanjay/.julia/config/`</span> path in my local computer. </span>
<span id="cb9-93"><a href="#cb9-93"></a></span>
<span id="cb9-94"><a href="#cb9-94"></a>Here is the sample for the startup.jl file:</span>
<span id="cb9-95"><a href="#cb9-95"></a></span>
<span id="cb9-96"><a href="#cb9-96"></a><span class="in">```julia</span></span>
<span id="cb9-97"><a href="#cb9-97"></a><span class="in">using PackageCompatUI</span></span>
<span id="cb9-98"><a href="#cb9-98"></a><span class="in">using PkgTemplates</span></span>
<span id="cb9-99"><a href="#cb9-99"></a><span class="in">using Revise</span></span>
<span id="cb9-100"><a href="#cb9-100"></a></span>
<span id="cb9-101"><a href="#cb9-101"></a><span class="in">###################################</span></span>
<span id="cb9-102"><a href="#cb9-102"></a><span class="in"># HELPER FUNCTIONS</span></span>
<span id="cb9-103"><a href="#cb9-103"></a><span class="in">###################################</span></span>
<span id="cb9-104"><a href="#cb9-104"></a><span class="in">function template()</span></span>
<span id="cb9-105"><a href="#cb9-105"></a><span class="in">    Template(;</span></span>
<span id="cb9-106"><a href="#cb9-106"></a><span class="in">        user="jay-sanjay",</span></span>
<span id="cb9-107"><a href="#cb9-107"></a><span class="in">        dir="~/FOSS",</span></span>
<span id="cb9-108"><a href="#cb9-108"></a><span class="in">        authors="jaysanjay &lt;jaysanjay@gmail.com&gt; and contributors",</span></span>
<span id="cb9-109"><a href="#cb9-109"></a><span class="in">        julia=v"1.6",</span></span>
<span id="cb9-110"><a href="#cb9-110"></a><span class="in">        plugins=[</span></span>
<span id="cb9-111"><a href="#cb9-111"></a><span class="in">            ProjectFile(; version=v"0.0.1"),</span></span>
<span id="cb9-112"><a href="#cb9-112"></a><span class="in">            Git(),</span></span>
<span id="cb9-113"><a href="#cb9-113"></a><span class="in">            Readme(),</span></span>
<span id="cb9-114"><a href="#cb9-114"></a><span class="in">            License(; name="MIT"),</span></span>
<span id="cb9-115"><a href="#cb9-115"></a><span class="in">            GitHubActions(; extra_versions=["1.6", "1", "nightly"]),</span></span>
<span id="cb9-116"><a href="#cb9-116"></a><span class="in">            TagBot(),</span></span>
<span id="cb9-117"><a href="#cb9-117"></a><span class="in">            Codecov(),</span></span>
<span id="cb9-118"><a href="#cb9-118"></a><span class="in">            Documenter{GitHubActions}(),</span></span>
<span id="cb9-119"><a href="#cb9-119"></a><span class="in">            Citation(; readme = true),</span></span>
<span id="cb9-120"><a href="#cb9-120"></a><span class="in">            RegisterAction(),</span></span>
<span id="cb9-121"><a href="#cb9-121"></a><span class="in">            BlueStyleBadge(),</span></span>
<span id="cb9-122"><a href="#cb9-122"></a><span class="in">            Formatter(;style = "blue")</span></span>
<span id="cb9-123"><a href="#cb9-123"></a><span class="in">        ],</span></span>
<span id="cb9-124"><a href="#cb9-124"></a><span class="in">    )</span></span>
<span id="cb9-125"><a href="#cb9-125"></a><span class="in">end</span></span>
<span id="cb9-126"><a href="#cb9-126"></a></span>
<span id="cb9-127"><a href="#cb9-127"></a><span class="in">```</span></span>
<span id="cb9-128"><a href="#cb9-128"></a></span>
<span id="cb9-129"><a href="#cb9-129"></a></span>
<span id="cb9-130"><a href="#cb9-130"></a><span class="fu">## 4. Selecting Treatments of Interest</span></span>
<span id="cb9-131"><a href="#cb9-131"></a></span>
<span id="cb9-132"><a href="#cb9-132"></a>So, as a part of this, we used the previously mentioned research paper and discussion with the mentors we came up with logic for it. The first thing to do was to determine the moment in time from which selected treatments of interest should be included in the treatment pathway. The default is all treatments starting after the index date of the target cohort. For example, for a target cohort consisting of newly diagnosed patients, treatments after the moment of first diagnosis are included. However, it would also be desirable to include (some) treatments before the index date, for instance in case a specific disease diagnosis is only confirmed after initiating treatment. Therefore, periodPriorToIndex specifies the period (i.e. number of days) before the index date from which treatments should be included. We have created two dispatches for this function.</span>
<span id="cb9-133"><a href="#cb9-133"></a>After that proper testing and documentation are also added.</span>
<span id="cb9-134"><a href="#cb9-134"></a></span>
<span id="cb9-135"><a href="#cb9-135"></a>A basic implementation for it is:</span>
<span id="cb9-136"><a href="#cb9-136"></a></span>
<span id="cb9-137"><a href="#cb9-137"></a><span class="ss">1. </span>Construct a SQL query to select cohort_definition_id, subject_id, and cohort_start_date from a specified table, filtering by cohort_id.</span>
<span id="cb9-138"><a href="#cb9-138"></a></span>
<span id="cb9-139"><a href="#cb9-139"></a><span class="ss">2. </span>The SQL query construction and execution was done using the <span class="co">[</span><span class="ot">FunSQL.jl</span><span class="co">](https://mechanicalrabbit.github.io/FunSQL.jl/stable/)</span> library, in the below-shown manner:</span>
<span id="cb9-140"><a href="#cb9-140"></a></span>
<span id="cb9-141"><a href="#cb9-141"></a><span class="in">```julia</span></span>
<span id="cb9-142"><a href="#cb9-142"></a><span class="in">sql = From(tab) |&gt;</span></span>
<span id="cb9-143"><a href="#cb9-143"></a><span class="in">            Where(Fun.in(Get.cohort_definition_id, cohort_id...)) |&gt;</span></span>
<span id="cb9-144"><a href="#cb9-144"></a><span class="in">            Select(Get.cohort_definition_id, Get.subject_id, Get.cohort_start_date) |&gt;</span></span>
<span id="cb9-145"><a href="#cb9-145"></a><span class="in">            q -&gt; render(q, dialect=dialect)</span></span>
<span id="cb9-146"><a href="#cb9-146"></a><span class="in">```</span></span>
<span id="cb9-147"><a href="#cb9-147"></a><span class="ss">3. </span>Executes the constructed SQL query using a database connection, fetching the results into a data frame.</span>
<span id="cb9-148"><a href="#cb9-148"></a></span>
<span id="cb9-149"><a href="#cb9-149"></a><span class="ss">4. </span>If the DataFrame is not empty, convert cohort_start_date to DateTime and subtract date_prior from each date, then return the modified DataFrame.</span>
<span id="cb9-150"><a href="#cb9-150"></a></span>
<span id="cb9-151"><a href="#cb9-151"></a>This was then be called this:</span>
<span id="cb9-152"><a href="#cb9-152"></a><span class="in">```julia</span></span>
<span id="cb9-153"><a href="#cb9-153"></a><span class="in">period_prior_to_index(</span></span>
<span id="cb9-154"><a href="#cb9-154"></a><span class="in">        cohort_id = [1, 1, 1, 1, 1], </span></span>
<span id="cb9-155"><a href="#cb9-155"></a><span class="in">        conn; </span></span>
<span id="cb9-156"><a href="#cb9-156"></a><span class="in">        date_prior = Day(100), </span></span>
<span id="cb9-157"><a href="#cb9-157"></a><span class="in">        tab=cohort</span></span>
<span id="cb9-158"><a href="#cb9-158"></a><span class="in">    )</span></span>
<span id="cb9-159"><a href="#cb9-159"></a><span class="in">```</span></span>
<span id="cb9-160"><a href="#cb9-160"></a></span>
<span id="cb9-161"><a href="#cb9-161"></a></span>
<span id="cb9-162"><a href="#cb9-162"></a><span class="fu">## 5. Filters Applied</span></span>
<span id="cb9-163"><a href="#cb9-163"></a></span>
<span id="cb9-164"><a href="#cb9-164"></a>After this, we where needed to get the patient's database filtered more finely so that there are minimal variations that can be ignored. The duration of the above extracted event eras may vary a lot and it can be preferable to limit to only treatments exceeding a minimum duration. Hence, minEraDuration speciﬁes the minimum time an event era should last to be included in the analysis. All these implementations were more of Dataframe manipulation where I used <span class="co">[</span><span class="ot">DataFrames.jl</span><span class="co">](https://dataframes.juliadata.org/stable/)</span> package.</span>
<span id="cb9-165"><a href="#cb9-165"></a></span>
<span id="cb9-166"><a href="#cb9-166"></a>After that proper testing and documentation are also added.</span>
<span id="cb9-167"><a href="#cb9-167"></a></span>
<span id="cb9-168"><a href="#cb9-168"></a>A basic implementation for the minEraDuration is:</span>
<span id="cb9-169"><a href="#cb9-169"></a>It filters the treatment history <span class="in">`DataFrame`</span> to retain only those rows where the duration between <span class="in">`drug_exposure_end`</span> and <span class="in">`drug_exposure_start`</span> is at least <span class="in">`minEraDuration`</span>.</span>
<span id="cb9-170"><a href="#cb9-170"></a>This function can be used as follows:</span>
<span id="cb9-171"><a href="#cb9-171"></a><span class="in">```julia</span></span>
<span id="cb9-172"><a href="#cb9-172"></a><span class="in">#| eval: false </span></span>
<span id="cb9-173"><a href="#cb9-173"></a></span>
<span id="cb9-174"><a href="#cb9-174"></a><span class="in">calculate_era_duration(test_df, 920000)</span></span>
<span id="cb9-175"><a href="#cb9-175"></a></span>
<span id="cb9-176"><a href="#cb9-176"></a><span class="in">#= ... =#</span></span>
<span id="cb9-177"><a href="#cb9-177"></a></span>
<span id="cb9-178"><a href="#cb9-178"></a><span class="in">4×3 DataFrame</span></span>
<span id="cb9-179"><a href="#cb9-179"></a><span class="in"> Row │ person_id  drug_exposure_start  drug_exposure_end </span></span>
<span id="cb9-180"><a href="#cb9-180"></a><span class="in">     │ Int64      Float64              Int64             </span></span>
<span id="cb9-181"><a href="#cb9-181"></a><span class="in">─────┼───────────────────────────────────────────────────</span></span>
<span id="cb9-182"><a href="#cb9-182"></a><span class="in">   1 │         1           -3.7273e8          -364953600</span></span>
<span id="cb9-183"><a href="#cb9-183"></a><span class="in">   2 │         1            2.90304e7           31449600</span></span>
<span id="cb9-184"><a href="#cb9-184"></a><span class="in">   3 │         1           -8.18208e7          -80006400</span></span>
<span id="cb9-185"><a href="#cb9-185"></a><span class="in">   4 │         1            1.32918e9         1330387200</span></span>
<span id="cb9-186"><a href="#cb9-186"></a><span class="in">```</span></span>
<span id="cb9-187"><a href="#cb9-187"></a></span>
<span id="cb9-188"><a href="#cb9-188"></a></span>
<span id="cb9-189"><a href="#cb9-189"></a>Another filter we worked on is the EraCollapse. So, let's suppose a case where an individual receives the same treatment for a long period</span>
<span id="cb9-190"><a href="#cb9-190"></a>of time (e.g. need for chronic treatment). Then it's highly likely that the person would require refills. Now as patients are not 100% adherent, there might be a gap between two subsequent event eras. Usually, these eras are still considered as one treatment episode, and the eraCollapseSize deals with the maximum gap within which two eras of the same event cohort would be collapsed into one era (i.e. seen as a continuous treatment instead of a stop and re-initiation of the same treatment).</span>
<span id="cb9-191"><a href="#cb9-191"></a>After that proper testing and documentation are also added.</span>
<span id="cb9-192"><a href="#cb9-192"></a></span>
<span id="cb9-193"><a href="#cb9-193"></a>A basic implementation for the eraCollapseSize is:</span>
<span id="cb9-194"><a href="#cb9-194"></a>(a) Sorts the data frame by event_start_date and event_end_date.</span>
<span id="cb9-195"><a href="#cb9-195"></a>(b) Calculates the gap between each era and the previous era.</span>
<span id="cb9-196"><a href="#cb9-196"></a>(c) Filters out rows with gap_same &gt; eraCollapseSize.</span>
<span id="cb9-197"><a href="#cb9-197"></a></span>
<span id="cb9-198"><a href="#cb9-198"></a>These functions can be used as follows:</span>
<span id="cb9-199"><a href="#cb9-199"></a><span class="in">```julia</span></span>
<span id="cb9-200"><a href="#cb9-200"></a><span class="in">#| eval: false </span></span>
<span id="cb9-201"><a href="#cb9-201"></a></span>
<span id="cb9-202"><a href="#cb9-202"></a><span class="in">#= ... =#</span></span>
<span id="cb9-203"><a href="#cb9-203"></a></span>
<span id="cb9-204"><a href="#cb9-204"></a><span class="in">EraCollapse(treatment_history = test_df, eraCollapseSize = 400000000)</span></span>
<span id="cb9-205"><a href="#cb9-205"></a><span class="in">4×4 DataFrame</span></span>
<span id="cb9-206"><a href="#cb9-206"></a><span class="in"> Row │ person_id  drug_exposure_start  drug_exposure_end  gap_same   </span></span>
<span id="cb9-207"><a href="#cb9-207"></a><span class="in">     │ Int64      Float64              Int64              Float64    </span></span>
<span id="cb9-208"><a href="#cb9-208"></a><span class="in">─────┼───────────────────────────────────────────────────────────────</span></span>
<span id="cb9-209"><a href="#cb9-209"></a><span class="in">   1 │         1           -5.33347e8         -532483200  -1.86373e9</span></span>
<span id="cb9-210"><a href="#cb9-210"></a><span class="in">   2 │         1           -3.7273e8          -364953600   1.59754e8</span></span>
<span id="cb9-211"><a href="#cb9-211"></a><span class="in">   3 │         1           -8.18208e7          -80006400   2.83133e8</span></span>
<span id="cb9-212"><a href="#cb9-212"></a><span class="in">   4 │         1            2.90304e7           31449600   1.09037e8</span></span>
<span id="cb9-213"><a href="#cb9-213"></a><span class="in">```</span></span>
<span id="cb9-214"><a href="#cb9-214"></a></span>
<span id="cb9-215"><a href="#cb9-215"></a></span>
<span id="cb9-216"><a href="#cb9-216"></a><span class="fu">## 6. Treatment History of the Patients</span></span>
<span id="cb9-217"><a href="#cb9-217"></a></span>
<span id="cb9-218"><a href="#cb9-218"></a>The <span class="in">`create_treatment_history`</span> function constructs a detailed treatment history for patients in a target cohort by processing and filtering event cohort data from a given DataFrame. It begins by isolating the target cohort based on its <span class="in">`cohort_id`</span>, adding a new column for the <span class="in">`index_year`</span> derived from the cohort’s start date. Then, it selects relevant event cohorts based on a provided list of cohort IDs and merges them with the target cohort on the <span class="in">`subject_id`</span> to associate events with individuals in the target group. The function applies different filtering criteria depending on whether the user is interested in treatments starting or ending within a specified period before the target cohort's start date (defined by <span class="in">`periodPriorToIndex`</span>). It keeps only the event cohorts that match the filtering condition, ensuring that only relevant treatments are considered. After filtering, the function calculates time gaps between consecutive cohort events for each patient, adding these gaps to the DataFrame. The final DataFrame provides a history of treatments, including the dates of events and the time intervals between them, offering a clear timeline of treatment for each patient. After that proper testing and documentation are also added.</span>
<span id="cb9-219"><a href="#cb9-219"></a></span>
<span id="cb9-220"><a href="#cb9-220"></a></span>
<span id="cb9-221"><a href="#cb9-221"></a><span class="fu">## 7. CombinationWindow Functionality To Combine Overlapping Treatments</span></span>
<span id="cb9-222"><a href="#cb9-222"></a></span>
<span id="cb9-223"><a href="#cb9-223"></a>Now once we have the filtering of the treatments done, we need to combine the overlapping treatments based on some set of rules. The combinationWindow specifies the time that two event eras need to overlap to be considered a combination treatment. If there are more than two overlapping event eras, we sequentially combine treatments, starting from the ﬁrst two overlapping event eras. </span>
<span id="cb9-224"><a href="#cb9-224"></a></span>
<span id="cb9-225"><a href="#cb9-225"></a>The <span class="in">`combination_Window`</span> function processes a patient's treatment history by identifying overlapping treatment events and combining them into continuous treatment periods based on certain rules. It first converts <span class="in">`event_cohort_id`</span> into strings and sorts the treatment data by <span class="in">`person_id`</span>, <span class="in">`event_start_date`</span>, and <span class="in">`event_end_date`</span>. The helper function <span class="in">`selectRowsCombinationWindow`</span> calculates gaps between consecutive treatments, marking rows where treatments overlap or occur too closely. In the main loop, the function checks these overlaps and gaps against a specified <span class="in">`combinationWindow`</span>. If treatments overlap (or nearly overlap), the function adjusts the treatment periods by either merging adjacent rows or splitting rows to create continuous treatment periods. The process continues until all overlapping treatments are combined into one, creating an updated and accurate treatment history. The function ensures the final output reflects realistic treatment windows by handling special cases where gaps between treatments are smaller than the treatment durations themselves.</span>
<span id="cb9-226"><a href="#cb9-226"></a></span>
<span id="cb9-227"><a href="#cb9-227"></a>It mainly covers the three cases mentioned in the R-research paper:</span>
<span id="cb9-228"><a href="#cb9-228"></a></span>
<span id="cb9-229"><a href="#cb9-229"></a><span class="fu">### Switch Case:</span></span>
<span id="cb9-230"><a href="#cb9-230"></a></span>
<span id="cb9-231"><a href="#cb9-231"></a>*Condition*: If the gap between the two treatment events is smaller than the combinationWindow, but the gap is not equal to the duration of either event.</span>
<span id="cb9-232"><a href="#cb9-232"></a>*Action*: The event_end_date of the previous treatment is set to the event_start_date of the current treatment. This effectively "shifts" the previous treatment’s end date to eliminate the gap, merging the treatments into one continuous period.</span>
<span id="cb9-233"><a href="#cb9-233"></a>*Purpose*: This ensures that treatment gaps that are too small (less than combinationWindow) are treated as part of the same treatment window.</span>
<span id="cb9-234"><a href="#cb9-234"></a></span>
<span id="cb9-235"><a href="#cb9-235"></a><span class="in">```julia</span></span>
<span id="cb9-236"><a href="#cb9-236"></a><span class="in">#| eval: false </span></span>
<span id="cb9-237"><a href="#cb9-237"></a></span>
<span id="cb9-238"><a href="#cb9-238"></a><span class="in">#= ... =#</span></span>
<span id="cb9-239"><a href="#cb9-239"></a></span>
<span id="cb9-240"><a href="#cb9-240"></a><span class="in">if -gap_previous &lt; combinationWindow &amp;&amp; !(-gap_previous in [duration_era, prev_duration_era])</span></span>
<span id="cb9-241"><a href="#cb9-241"></a><span class="in">    treatment_history[i-1, :event_end_date] = treatment_history[i, :event_start_date]</span></span>
<span id="cb9-242"><a href="#cb9-242"></a><span class="in">```</span></span>
<span id="cb9-243"><a href="#cb9-243"></a>Here is the pictorial representation for the same:</span>
<span id="cb9-244"><a href="#cb9-244"></a><span class="al">![](./case1.png)</span></span>
<span id="cb9-245"><a href="#cb9-245"></a></span>
<span id="cb9-246"><a href="#cb9-246"></a><span class="fu">### FRFS (First Row, First Shortened):</span></span>
<span id="cb9-247"><a href="#cb9-247"></a></span>
<span id="cb9-248"><a href="#cb9-248"></a>*Condition*: If the gap is larger than or equal to the combinationWindow, or the gap equals the duration of one of the two treatments, and the first treatment ends before or on the same date as the second treatment.</span>
<span id="cb9-249"><a href="#cb9-249"></a>*Action*: A new row is created where the second treatment’s event_end_date is set to the end date of the first treatment. This preserves the overlap but ensures that the earlier treatment period stays intact.</span>
<span id="cb9-250"><a href="#cb9-250"></a>*Purpose*: This prevents unnecessary truncation of the first treatment if it spans the entire overlap window.</span>
<span id="cb9-251"><a href="#cb9-251"></a></span>
<span id="cb9-252"><a href="#cb9-252"></a><span class="in">```julia</span></span>
<span id="cb9-253"><a href="#cb9-253"></a><span class="in">#| eval: false </span></span>
<span id="cb9-254"><a href="#cb9-254"></a></span>
<span id="cb9-255"><a href="#cb9-255"></a><span class="in">#= ... =#</span></span>
<span id="cb9-256"><a href="#cb9-256"></a></span>
<span id="cb9-257"><a href="#cb9-257"></a><span class="in">elseif -gap_previous &gt;= combinationWindow || -gap_previous in [duration_era, prev_duration_era]</span></span>
<span id="cb9-258"><a href="#cb9-258"></a><span class="in">    if treatment_history[i-1, :event_end_date] &lt;= treatment_history[i, :event_end_date]</span></span>
<span id="cb9-259"><a href="#cb9-259"></a><span class="in">        new_row = deepcopy(treatment_history[i, :])</span></span>
<span id="cb9-260"><a href="#cb9-260"></a><span class="in">        new_row.event_end_date = treatment_history[i-1, :event_end_date]</span></span>
<span id="cb9-261"><a href="#cb9-261"></a><span class="in">        append!(treatment_history, DataFrame(new_row'))</span></span>
<span id="cb9-262"><a href="#cb9-262"></a><span class="in">```</span></span>
<span id="cb9-263"><a href="#cb9-263"></a>Here is the pictorial representation for the same:</span>
<span id="cb9-264"><a href="#cb9-264"></a><span class="al">![](./case2.png)</span></span>
<span id="cb9-265"><a href="#cb9-265"></a></span>
<span id="cb9-266"><a href="#cb9-266"></a><span class="fu">### LRFS (Last Row, First Shortened):</span></span>
<span id="cb9-267"><a href="#cb9-267"></a></span>
<span id="cb9-268"><a href="#cb9-268"></a>*Condition*: If the gap is larger than or equal to the combinationWindow, or the gap equals the duration of one of the treatments, and the first treatment ends after the second treatment.</span>
<span id="cb9-269"><a href="#cb9-269"></a>*Action*: The current treatment’s event_end_date is adjusted to match the event_end_date of the previous treatment.</span>
<span id="cb9-270"><a href="#cb9-270"></a>*Purpose*: This handles cases where the second treatment's window should be shortened to prevent overlap with the previous treatment, merging them into a single continuous window.</span>
<span id="cb9-271"><a href="#cb9-271"></a></span>
<span id="cb9-272"><a href="#cb9-272"></a><span class="in">```julia</span></span>
<span id="cb9-273"><a href="#cb9-273"></a><span class="in">#| eval: false </span></span>
<span id="cb9-274"><a href="#cb9-274"></a></span>
<span id="cb9-275"><a href="#cb9-275"></a><span class="in">#= ... =#</span></span>
<span id="cb9-276"><a href="#cb9-276"></a></span>
<span id="cb9-277"><a href="#cb9-277"></a><span class="in">else</span></span>
<span id="cb9-278"><a href="#cb9-278"></a><span class="in">    treatment_history[i, :event_end_date] = treatment_history[i-1, :event_end_date]</span></span>
<span id="cb9-279"><a href="#cb9-279"></a><span class="in">```</span></span>
<span id="cb9-280"><a href="#cb9-280"></a>Here is the pictorial representation for the same:</span>
<span id="cb9-281"><a href="#cb9-281"></a><span class="al">![](./case3.png)</span></span>
<span id="cb9-282"><a href="#cb9-282"></a></span>
<span id="cb9-283"><a href="#cb9-283"></a></span>
<span id="cb9-284"><a href="#cb9-284"></a><span class="at">&gt; *Note:* However, There are a few things left to cover here, most of which are the documentation and writing the test suite for the same.</span></span>
<span id="cb9-285"><a href="#cb9-285"></a></span>
<span id="cb9-286"><a href="#cb9-286"></a><span class="fu"># Contributions Beyond Coding</span></span>
<span id="cb9-287"><a href="#cb9-287"></a></span>
<span id="cb9-288"><a href="#cb9-288"></a><span class="fu">## 1. Organizing Meetings and Communication</span></span>
<span id="cb9-289"><a href="#cb9-289"></a></span>
<span id="cb9-290"><a href="#cb9-290"></a>Throughout the project, I regularly met with my mentor, <span class="co">[</span><span class="ot">Jacob Zelko</span><span class="co">]</span>, and co-mentor, <span class="co">[</span><span class="ot">Mounika</span><span class="co">]</span>, via weekly Zoom calls to discuss progress and seek guidance. During these meetings, we reviewed my work, identified areas where I needed help, and set clear goals for the upcoming weeks. We used Trello to organize and track these goals, ensuring that nothing was overlooked. My mentors provided detailed insights into specific technical aspects and guided me through the logic behind various functions. Outside of our scheduled meetings, they were always available for quick queries via Slack, ensuring constant support.</span>
<span id="cb9-291"><a href="#cb9-291"></a></span>
<span id="cb9-292"><a href="#cb9-292"></a><span class="fu">## 2. Personal Documentation</span></span>
<span id="cb9-293"><a href="#cb9-293"></a></span>
<span id="cb9-294"><a href="#cb9-294"></a>In addition to the notes from our meetings, I maintained personal documentation where I recorded every step I took, including the challenges I faced and the mistakes I made. This helped me reflect on my progress and stay organized throughout the fellowship. Following my selection for GSoC 2024, I also published a blog post on <span class="co">[</span><span class="ot">Medium</span><span class="co">](https://medium.com/@landgejay124/gsoc-24-the-julia-language-62b809bbec49)</span> to share my journey and experiences with the Julia Language community.</span>
<span id="cb9-295"><a href="#cb9-295"></a></span>
<span id="cb9-296"><a href="#cb9-296"></a><span class="fu">## 3. Contributions To the Rest of the JuliaHealth Repositories</span></span>
<span id="cb9-297"><a href="#cb9-297"></a></span>
<span id="cb9-298"><a href="#cb9-298"></a>Earlier I have contributed a lot to the <span class="co">[</span><span class="ot">OMOPCDMCohortCreator.jl</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMCohortCreator.jl)</span> including adding new functionalities writing test suites, adding blogs including - <span class="co">[</span><span class="ot">Patient Pathways within JuliaHealth</span><span class="co">](https://github.com/JuliaHealth/juliahealth.github.io/pull/124)</span>. Apart from that I also initiated 3 new releases of this package.</span>
<span id="cb9-299"><a href="#cb9-299"></a></span>
<span id="cb9-300"><a href="#cb9-300"></a><span class="fu"># Conclusions and Future Development</span></span>
<span id="cb9-301"><a href="#cb9-301"></a></span>
<span id="cb9-302"><a href="#cb9-302"></a>This project was a 350-hour large project since there were many goals to accomplish. Here is what we accomplished:</span>
<span id="cb9-303"><a href="#cb9-303"></a></span>
<span id="cb9-304"><a href="#cb9-304"></a><span class="ss">1. </span>Built a new repository in JuliaHealth land dedicated especially to treatment pathways synthesis.</span>
<span id="cb9-305"><a href="#cb9-305"></a></span>
<span id="cb9-306"><a href="#cb9-306"></a><span class="ss">2. </span>CI/CD for the Package and Documentation hosting.</span>
<span id="cb9-307"><a href="#cb9-307"></a></span>
<span id="cb9-308"><a href="#cb9-308"></a><span class="ss">3. </span>All required basic functionalities required to build the pathways.</span>
<span id="cb9-309"><a href="#cb9-309"></a></span>
<span id="cb9-310"><a href="#cb9-310"></a><span class="ss">4. </span>Documentation and test suites added for each.</span>
<span id="cb9-311"><a href="#cb9-311"></a></span>
<span id="cb9-312"><a href="#cb9-312"></a>Future work would include:</span>
<span id="cb9-313"><a href="#cb9-313"></a></span>
<span id="cb9-314"><a href="#cb9-314"></a><span class="ss">- </span>Finish this <span class="co">[</span><span class="ot">PR</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/pull/63)</span> test-suites and documentation are remaining for this PR. </span>
<span id="cb9-315"><a href="#cb9-315"></a></span>
<span id="cb9-316"><a href="#cb9-316"></a><span class="ss">- </span>Apart from that, we would need to add a <span class="co">[</span><span class="ot">function</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/9)</span> that sews up all the functionalities of the package so that the user can run the complete pathways analysis by running just one function instead of running each of the functions manually. </span>
<span id="cb9-317"><a href="#cb9-317"></a></span>
<span id="cb9-318"><a href="#cb9-318"></a><span class="ss">- </span>Also, in the future, we would explore what statistical functionalities we would need to further explore pathways. </span>
<span id="cb9-319"><a href="#cb9-319"></a></span>
<span id="cb9-320"><a href="#cb9-320"></a><span class="ss">- </span>Then, we could explore how to compose JuliaHealth with packages from ecosystems like <span class="co">[</span><span class="ot">JuliaStats</span><span class="co">](https://juliastats.org/)</span> and <span class="co">[</span><span class="ot">JuliaDSP</span><span class="co">](https://docs.juliadsp.org/stable/contents/)</span> (for time series analysis) that are mentioned in this <span class="co">[</span><span class="ot">PR</span><span class="co">](https://github.com/JuliaHealth/OMOPCDMPathways.jl/issues/8)</span>. </span>
<span id="cb9-321"><a href="#cb9-321"></a></span>
<span id="cb9-322"><a href="#cb9-322"></a><span class="ss">- </span>And finally work on creating novel visualizations for the Pathways. Commonly used visualizations for treatment pathways (such as sunburst or icicle plots) showing which patients fall under what treatment pathways could be developed as plotting recipes to visualize various aspects of a patient’s care pathway rapidly.</span>
<span id="cb9-323"><a href="#cb9-323"></a></span>
<span id="cb9-324"><a href="#cb9-324"></a><span class="fu"># Acknowledgements 🙇‍♂️</span></span>
<span id="cb9-325"><a href="#cb9-325"></a></span>
<span id="cb9-326"><a href="#cb9-326"></a><span class="ss">1. </span><span class="co">[</span><span class="ot">Jacob S. Zelko</span><span class="co">](https://jacobzelko.com)</span>: aka, <span class="co">[</span><span class="ot">TheCedarPrince</span><span class="co">](https://github.com/TheCedarPrince)</span></span>
<span id="cb9-327"><a href="#cb9-327"></a></span>
<span id="cb9-328"><a href="#cb9-328"></a><span class="ss">2. </span><span class="co">[</span><span class="ot">Mounika Thakkallapally</span><span class="co">](https://www.linkedin.com/in/mounika-thakkallapally/)</span></span>
<span id="cb9-329"><a href="#cb9-329"></a></span>
<span id="cb9-330"><a href="#cb9-330"></a>Thank you for your continuous help and support throughout the fellowship.</span>
<span id="cb9-331"><a href="#cb9-331"></a>_Note: This blog post was also written with the assistance of LLM technologies to help with grammar, flow, and spelling!_</span>
<span id="cb9-332"><a href="#cb9-332"></a></span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, JuliaHealth.</p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JuliaHealth/JuliaHealthBlog">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/c/TheJuliaLanguage">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml">
      <i class="bi bi-rss" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://julialang.org/slack/">
      <i class="bi bi-slack" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/julialanguage">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/JuliaHealth/JuliaHealthBlog/edit/main/posts/jay-gsoc/gsoc-2024-fellows.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/JuliaHealth/JuliaHealthBlog/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>